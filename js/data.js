"use strict";
// class that store the data
class PostsData {
    constructor(id, title, body, imageUrl) {
        this.id = id;
        this.title = title;
        this.body = body;
        this.imageUrl = imageUrl;
    }
}
//class that store the comments
class Comments {
    constructor(id, postId, body, email) {
        this.id = id;
        this.postId = postId;
        this.body = body;
        this.email = email;
    }
}
// set the posts
const data = new Array();
data.push({
    id: 1,
    title: "Post 1",
    body: "Body of post 1",
    imageUrl: "https://fotografiamais.com.br/wp-content/uploads/2019/04/fotos-da-natureza-um-genero.jpg"
});
data.push({
    id: 2,
    title: "Post 2",
    body: "Body of post 2",
    imageUrl: "https://img.freepik.com/fotos-gratis/bela-paisagem-de-um-rio-cercado-por-muito-verde-em-uma-floresta_181624-40482.jpg?w=1380&t=st=1680198786~exp=1680199386~hmac=75263a427df2001893bc9d39b43066fa991b5336c38bc525477146a5217b106b"
});
data.push({
    id: 3,
    title: "Post 3",
    body: "Body of post 3",
    imageUrl: "https://img.freepik.com/fotos-gratis/caminho-de-madeira-bonito-indo-as-arvores-coloridas-de-tirar-o-folego-em-uma-floresta_181624-5840.jpg?w=1380&t=st=1680198883~exp=1680199483~hmac=cf55aa1c1c1f8b0659c545d85067eee21750235943d18580146f4364faa29f42"
});
// set the comments
const comments = new Array();
comments.push({
    id: 1,
    postId: 1,
    email: "pedrinho@gmail.com",
    body: `What a beautiful view, I love the sunset!`
});
comments.push({
    id: 2,
    postId: 1,
    email: "Joaozin@gmail.com",
    body: `Amazing!!!`
});
comments.push({
    id: 1,
    postId: 2,
    email: "Joaozin@gmail.com",
    body: `I love rivers!!!`
});
comments.push({
    id: 2,
    postId: 2,
    email: "klebermachado@gmail.com",
    body: `Wow, how much green`
});
comments.push({
    id: 1,
    postId: 3,
    email: "RafadoBt@gmail.com",
    body: `I love Autumn!!!`
});
comments.push({
    id: 2,
    postId: 3,
    email: "Bovs@gmail.com",
    body: `Where are this place? I need to visit`
});
// HTML Posts
const postCard = (aux) => `
  <div class='post'>
    <button type='button' class='post-btn' id='${aux.id}'>
      <img src='${aux.imageUrl}' alt='${aux.title}' />
      <div>
        <h1>${aux.title}</h1>
        <p>${aux.body}</p>
      </div>
    </button>
  </div>
`;
// HTML Comments
const postComments = (aux) => ` 
  <h3>${aux.email}</h3>
  <p>${aux.body}</p>
`;
//beginning of project
const postsList = document.getElementById('posts-list');
let postsDataToHTML = '';
if (postsList) {
    for (const postData of data) {
        postsDataToHTML += postCard(postData);
    }
    postsList.innerHTML = postsDataToHTML;
    createPostButtons();
}
function createPostButtons() {
    const postButtons = document.querySelectorAll('.post-btn');
    postButtons.forEach((button) => {
        button.addEventListener('click', function () {
            const postId = +this.id;
            const postData = data.find((post) => post.id === postId);
            // HTML from the new page
            let imageHtml = ` <div class="postImage">
                          <img src="${postData.imageUrl}" alt="${postData.title}" class="imageClass" />
                          <div class="description">
                            <h1>${postData.title}</h1>
                            <p id="body">${postData.body}</p>
                          </div>
                        </div>`;
            let commentsHtml = `<h2 class="commentsh2">Comments</h2>`;
            for (const aux of comments) {
                if (aux.postId == postId)
                    commentsHtml += postComments(aux);
            }
            const backHtml = `<button id="back-btn">Back</button>`;
            const pageHtml = `${imageHtml}<div class="comments">${commentsHtml}</div>${backHtml}`;
            // New page with the post and the comments
            postsList.innerHTML = pageHtml;
            // Back-Button event
            const backButton = document.querySelector('#back-btn');
            backButton.addEventListener('click', function () {
                postsList.innerHTML = postsDataToHTML;
                createPostButtons();
            });
        });
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3RzL2RhdGEudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLDRCQUE0QjtBQUM1QixNQUFNLFNBQVM7SUFNYixZQUFZLEVBQVMsRUFBRSxLQUFZLEVBQUUsSUFBVyxFQUFFLFFBQWdCO1FBQ2hFLElBQUksQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDO1FBQ2IsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7SUFDM0IsQ0FBQztDQUNGO0FBRUQsK0JBQStCO0FBQy9CLE1BQU0sUUFBUTtJQU1aLFlBQVksRUFBUyxFQUFFLE1BQWEsRUFBRSxJQUFXLEVBQUUsS0FBWTtRQUM3RCxJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztRQUNiLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0lBQ3JCLENBQUM7Q0FDRjtBQUVELGdCQUFnQjtBQUNoQixNQUFNLElBQUksR0FBZ0IsSUFBSSxLQUFLLEVBQWEsQ0FBQztBQUVqRCxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ1IsRUFBRSxFQUFHLENBQUM7SUFDTixLQUFLLEVBQUcsUUFBUTtJQUNoQixJQUFJLEVBQUcsZ0JBQWdCO0lBQ3ZCLFFBQVEsRUFBRywwRkFBMEY7Q0FDdEcsQ0FBQyxDQUFDO0FBRUgsSUFBSSxDQUFDLElBQUksQ0FBQztJQUNSLEVBQUUsRUFBRSxDQUFDO0lBQ0wsS0FBSyxFQUFFLFFBQVE7SUFDZixJQUFJLEVBQUUsZ0JBQWdCO0lBQ3RCLFFBQVEsRUFBRSxtT0FBbU87Q0FDOU8sQ0FBQyxDQUFDO0FBRUgsSUFBSSxDQUFDLElBQUksQ0FBQztJQUNS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Z0IsUUFBUSxDQUFDLFFBQVEsVUFBVSxRQUFRLENBQUMsS0FBSzs7a0NBRTdDLFFBQVEsQ0FBQyxLQUFLOzJDQUNMLFFBQVEsQ0FBQyxJQUFJOzsrQkFFekIsQ0FBQztZQUUxQixJQUFJLFlBQVksR0FBRyxzQ0FBc0MsQ0FBQztZQUUxRCxLQUFJLE1BQU0sR0FBRyxJQUFJLFFBQVEsRUFBQztnQkFDeEIsSUFBRyxHQUFHLENBQUMsTUFBTSxJQUFJLE1BQU07b0JBQ3JCLFlBQVksSUFBSSxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDckM7WUFFRCxNQUFNLFFBQVEsR0FBRyxxQ0FBcUMsQ0FBQztZQUN2RCxNQUFNLFFBQVEsR0FBRyxHQUFHLFNBQVMseUJBQXlCLFlBQVksU0FBUyxRQUFRLEVBQUUsQ0FBQztZQUV0RiwwQ0FBMEM7WUFDMUMsU0FBUyxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUM7WUFFL0Isb0JBQW9CO1lBQ3BCLE1BQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFFLENBQUM7WUFDeEQsVUFBVSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRTtnQkFDbkMsU0FBUyxDQUFDLFNBQVMsR0FBRyxlQUFlLENBQUM7Z0JBQ3RDLGlCQUFpQixFQUFFLENBQUM7WUFDdEIsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGNsYXNzIHRoYXQgc3RvcmUgdGhlIGRhdGFcbmNsYXNzIFBvc3RzRGF0YSB7XG4gIGlkOiBudW1iZXI7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGJvZHk6IHN0cmluZztcbiAgaW1hZ2VVcmw6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihpZDpudW1iZXIsIHRpdGxlOnN0cmluZywgYm9keTpzdHJpbmcsIGltYWdlVXJsOiBzdHJpbmcpe1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgdGhpcy5ib2R5ID0gYm9keTtcbiAgICB0aGlzLmltYWdlVXJsID0gaW1hZ2VVcmw7XG4gIH1cbn1cblxuLy9jbGFzcyB0aGF0IHN0b3JlIHRoZSBjb21tZW50c1xuY2xhc3MgQ29tbWVudHMge1xuICBpZDogbnVtYmVyO1xuICBwb3N0SWQ6IG51bWJlcjtcbiAgZW1haWw6IHN0cmluZztcbiAgYm9keTogc3RyaW5nO1xuICBcbiAgY29uc3RydWN0b3IoaWQ6bnVtYmVyLCBwb3N0SWQ6bnVtYmVyLCBib2R5OnN0cmluZywgZW1haWw6c3RyaW5nKXtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5wb3N0SWQgPSBwb3N0SWQ7XG4gICAgdGhpcy5ib2R5ID0gYm9keTtcbiAgICB0aGlzLmVtYWlsID0gZW1haWw7XG4gIH1cbn1cblxuLy8gc2V0IHRoZSBwb3N0c1xuY29uc3QgZGF0YTogUG9zdHNEYXRhW10gPSBuZXcgQXJyYXk8UG9zdHNEYXRhPigpO1xuXG5kYXRhLnB1c2goe1xuICBpZCA6IDEsXG4gIHRpdGxlIDogXCJQb3N0IDFcIixcbiAgYm9keSA6IFwiQm9keSBvZiBwb3N0IDFcIixcbiAgaW1hZ2VVcmwgOiBcImh0dHBzOi8vZm90b2dyYWZpYW1haXMuY29tLmJyL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDE5LzA0L2ZvdG9zLWRhLW5hdHVyZXphLXVtLWdlbmVyby5qcGdcIlxufSk7XG5cbmRhdGEucHVzaCh7XG4gIGlkOiAyLFxuICB0aXRsZTogXCJQb3N0IDJcIixcbiAgYm9keTogXCJCb2R5IG9mIHBvc3QgMlwiLFxuICBpbWFnZVVybDogXCJodHRwczovL2ltZy5mcmVlcGlrLmNvbS9mb3Rvcy1ncmF0aXMvYmVsYS1wYWlzYWdlbS1kZS11bS1yaW8tY2VyY2Fkby1wb3ItbXVpdG8tdmVyZGUtZW0tdW1hLWZsb3Jlc3RhXzE4MTYyNC00MDQ4Mi5qcGc/dz0xMzgwJnQ9c3Q9MTY4MDE5ODc4Nn5leHA9MTY4MDE5OTM4Nn5obWFjPTc1MjYzYTQyN2RmMjAwMTg5M2JjOWQzOWI0MzA2NmZhOTkxYjUzMzZjMzhiYzUyNTQ3NzE0NmE1MjE3YjEwNmJcIlxufSk7XG5cbmRhdGEucHVzaCh7XG4gIGlkOiAzLFxuICB0aXRsZTogXCJQb3N0IDNcIixcbiAgYm9keTogXCJCb2R5IG9mIHBvc3QgM1wiLFxuICBpbWFnZVVybDogXCJodHRwczovL2ltZy5mcmVlcGlrLmNvbS9mb3Rvcy1ncmF0aXMvY2FtaW5oby1kZS1tYWRlaXJhLWJvbml0by1pbmRvLWFzLWFydm9yZXMtY29sb3JpZGFzLWRlLXRpcmFyLW8tZm9sZWdvLWVtLXVtYS1mbG9yZXN0YV8xODE2MjQtNTg0MC5qcGc/dz0xMzgwJnQ9c3Q9MTY4MDE5ODg4M35leHA9MTY4MDE5OTQ4M35obWFjPWNmNTVhYTFjMWMxZjhiMDY1OWM1NDVkODUwNjdlZWUyMTc1MDIzNTk0M2QxODU4MDE0NmY0MzY0ZmFhMjlmNDJcIlxufSk7XG5cbi8vIHNldCB0aGUgY29tbWVudHNcbmNvbnN0IGNvbW1lbnRzOiBDb21tZW50c1tdID0gbmV3IEFycmF5PENvbW1lbnRzPigpO1xuXG5jb21tZW50cy5wdXNoKHtcbiAgaWQ6IDEsXG4gIHBvc3RJZDogMSxcbiAgZW1haWw6IFwicGVkcmluaG9AZ21haWwuY29tXCIsXG4gIGJvZHk6IGBXaGF0IGEgYmVhdXRpZnVsIHZpZXcsIEkgbG92ZSB0aGUgc3Vuc2V0IWBcbn0pO1xuXG5jb21tZW50cy5wdXNoKHtcbiAgaWQ6IDIsXG4gIHBvc3RJZDogMSxcbiAgZW1haWw6IFwiSm9hb3ppbkBnbWFpbC5jb21cIixcbiAgYm9keTogYEFtYXppbmchISFgXG59KTtcblxuY29tbWVudHMucHVzaCh7XG4gIGlkOiAxLFxuICBwb3N0SWQ6IDIsXG4gIGVtYWlsOiBcIkpvYW96aW5AZ21haWwuY29tXCIsXG4gIGJvZHk6IGBJIGxvdmUgcml2ZXJzISEhYFxufSk7XG5cbmNvbW1lbnRzLnB1c2goe1xuICBpZDogMixcbiAgcG9zdElkOiAyLFxuICBlbWFpbDogXCJrbGViZXJtYWNoYWRvQGdtYWlsLmNvbVwiLFxuICBib2R5OiBgV293LCBob3cgbXVjaCBncmVlbmBcbn0pO1xuXG5jb21tZW50cy5wdXNoKHtcbiAgaWQ6IDEsXG4gIHBvc3RJZDogMyxcbiAgZW1haWw6IFwiUmFmYWRvQnRAZ21haWwuY29tXCIsXG4gIGJvZHk6IGBJIGxvdmUgQXV0dW1uISEhYFxufSk7XG5cbmNvbW1lbnRzLnB1c2goe1xuICBpZDogMixcbiAgcG9zdElkOiAzLFxuICBlbWFpbDogXCJCb3ZzQGdtYWlsLmNvbVwiLFxuICBib2R5OiBgV2hlcmUgYXJlIHRoaXMgcGxhY2U/IEkgbmVlZCB0byB2aXNpdGBcbn0pO1xuXG5cbi8vIEhUTUwgUG9zdHNcbmNvbnN0IHBvc3RDYXJkID0gKGF1eCA6IFBvc3RzRGF0YSkgPT4gYFxuICA8ZGl2IGNsYXNzPSdwb3N0Jz5cbiAgICA8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J3Bvc3QtYnRuJyBpZD0nJHthdXguaWR9Jz5cbiAgICAgIDxpbWcgc3JjPScke2F1eC5pbWFnZVVybH0nIGFsdD0nJHthdXgudGl0bGV9JyAvPlxuICAgICAgPGRpdj5cbiAgICAgICAgPGgxPiR7YXV4LnRpdGxlfTwvaDE+XG4gICAgICAgIDxwPiR7YXV4LmJvZHl9PC9wPlxuICAgICAgPC9kaXY+XG4gICAgPC9idXR0b24+XG4gIDwvZGl2PlxuYDtcblxuLy8gSFRNTCBDb21tZW50c1xuY29uc3QgcG9zdENvbW1lbnRzID0gKGF1eCA6IENvbW1lbnRzKSA9PmAgXG4gIDxoMz4ke2F1eC5lbWFpbH08L2gzPlxuICA8cD4ke2F1eC5ib2R5fTwvcD5cbmA7XG5cbi8vYmVnaW5uaW5nIG9mIHByb2plY3RcbmNvbnN0IHBvc3RzTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3N0cy1saXN0JykhO1xubGV0IHBvc3RzRGF0YVRvSFRNTCA9ICcnO1xuXG5pZiAocG9zdHNMaXN0KSB7XG5cbiAgZm9yIChjb25zdCBwb3N0RGF0YSBvZiBkYXRhKSB7ICBcbiAgICBwb3N0c0RhdGFUb0hUTUwgKz0gcG9zdENhcmQocG9zdERhdGEpITtcbiAgfVxuXG4gIHBvc3RzTGlzdC5pbm5lckhUTUwgPSBwb3N0c0RhdGFUb0hUTUw7XG5cbiAgY3JlYXRlUG9zdEJ1dHRvbnMoKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUG9zdEJ1dHRvbnMoKSB7XG4gIGNvbnN0IHBvc3RCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvc3QtYnRuJyk7XG4gIHBvc3RCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IHBvc3RJZCA9ICt0aGlzLmlkO1xuICAgICAgY29uc3QgcG9zdERhdGEgOiBQb3N0c0RhdGEgPSBkYXRhLmZpbmQoKHBvc3QgOiBQb3N0c0RhdGEpID0+IHBvc3QuaWQgPT09IHBvc3RJZCkhO1xuXG4gICAgICAvLyBIVE1MIGZyb20gdGhlIG5ldyBwYWdlXG4gICAgICBsZXQgaW1hZ2VIdG1sID0gYCA8ZGl2IGNsYXNzPVwicG9zdEltYWdlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtwb3N0RGF0YS5pbWFnZVVybH1cIiBhbHQ9XCIke3Bvc3REYXRhLnRpdGxlfVwiIGNsYXNzPVwiaW1hZ2VDbGFzc1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXNjcmlwdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT4ke3Bvc3REYXRhLnRpdGxlfTwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgaWQ9XCJib2R5XCI+JHtwb3N0RGF0YS5ib2R5fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOyAgXG4gICAgICBcbiAgICAgIGxldCBjb21tZW50c0h0bWwgPSBgPGgyIGNsYXNzPVwiY29tbWVudHNoMlwiPkNvbW1lbnRzPC9oMj5gO1xuXG4gICAgICBmb3IoY29uc3QgYXV4IG9mIGNvbW1lbnRzKXtcbiAgICAgICAgaWYoYXV4LnBvc3RJZCA9PSBwb3N0SWQpXG4gICAgICAgICAgY29tbWVudHNIdG1sICs9IHBvc3RDb21tZW50cyhhdXgpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBiYWNrSHRtbCA9IGA8YnV0dG9uIGlkPVwiYmFjay1idG5cIj5CYWNrPC9idXR0b24+YDtcbiAgICAgIGNvbnN0IHBhZ2VIdG1sID0gYCR7aW1hZ2VIdG1sfTxkaXYgY2xhc3M9XCJjb21tZW50c1wiPiR7Y29tbWVudHNIdG1sfTwvZGl2PiR7YmFja0h0bWx9YDtcblxuICAgICAgLy8gTmV3IHBhZ2Ugd2l0aCB0aGUgcG9zdCBhbmQgdGhlIGNvbW1lbnRzXG4gICAgICBwb3N0c0xpc3QuaW5uZXJIVE1MID0gcGFnZUh0bWw7XG5cbiAgICAgIC8vIEJhY2stQnV0dG9uIGV2ZW50XG4gICAgICBjb25zdCBiYWNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JhY2stYnRuJykhO1xuICAgICAgYmFja0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBwb3N0c0xpc3QuaW5uZXJIVE1MID0gcG9zdHNEYXRhVG9IVE1MO1xuICAgICAgICBjcmVhdGVQb3N0QnV0dG9ucygpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufVxuIl19